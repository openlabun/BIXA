<script>


function matriz(a, b) {
    let c = 0;
    let my;
    let mr;
    let r;
    let carac;
    let con;
    let long1 = a.length;
    let long2 = b.length;
    let n;
    if (long1 >= long2) {
        n = long1;
        con = 1;
        my = long1;
        mr = long2;
    } else {
        if (long2 > long1) {
            n = long2;
            con = 2;
            my = long2;
            mr = long1;
        }
    }
    r = my - mr;
    let m = [];
    for (let i = 0; i < 4; i++) {
        let fila = [];
        for (let j = 0; j < n + 1; j++) {
            fila.push(0);
        }
        m.push(fila);
    }

    for (let i = 1; i < 3; i++) {
        carac = 0;
        for (let j = 1; j < n + 1; j++) {

            if (con == 1 && i == 1) {
                m[i][j] = parseInt(a.substring(carac, carac + 1), 10);
                carac = carac + 1;
            } else {
                if (con == 1 && i == 2 && c == r) {
                    m[i][j] = parseInt(b.substring(carac, carac + 1), 10);
                    carac = carac + 1;

                } else {
                    if (con == 2 && i == 2) {
                        m[i][j] = parseInt(b.substring(carac, carac + 1), 10);
                        carac = carac + 1;

                    } else {
                        if (con == 2 && i == 1 && c == r) {
                            m[i][j] = parseInt(a.substring(carac, carac + 1), 10);
                            carac = carac + 1;
                        } else {
                            c++
                        }
                    }
                }
            }

        }
    }
    return m
}
function explicacions(m, o) {
    let col = m[0].length;
    for (let j = col; j >= 0; j--) {
        if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 0 || m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 1 || m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 1) {
            if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 0) {
                console.log("\n")
                console.log("1+1=0")
                console.log("Llevamos 1")
            } else {
                if (m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 1) {
                    console.log("\n")
                    console.log("1+1=0 -> 0+0=0")
                    console.log("Llevamos 1")
                } else {
                    if (m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 1) {
                        console.log("\n")
                        console.log("1+0=1 -> 1+1=0")
                        console.log("Llevamos 1")
                    }
                }
            }
            m[0][j - 1] = 1
            m[3][j] = 0
        } else {
            if (m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 0 || m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 0 || m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 1) {
                if (m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 0) {
                    console.log("\n")
                    console.log("0+1=1")
                } else {
                    if (m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 0) {
                        console.log("\n")
                        console.log("1+0=1")
                    } else {
                        if (m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 1) {
                            console.log("\n")
                            console.log("1+0=1 -> 1+0=1")
                        }
                    }
                }
                m[3][j] = 1
            } else {
                if (m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 0) {
                    console.log("\n")
                    console.log("0+0=0")
                    m[3][j] = 0
                } else {
                    if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 1) {
                        console.log("\n")
                        console.log("1+1=0 -> 0+1=1")
                        console.log("Llevamos 1")
                        m[0][j - 1] = 1
                        m[3][j] = 1
                    }
                }
            }
        }
        console.log("\n")
        console.log(m)
    }
    let rta = m[3];
    let rta1
    let i = 0;
    for (i = 0; i < rta.length; i++) {
        if (i == 0) {
            rta1 = String.fromCharCode(rta[i] + 48)
        } else {
            rta1 = rta1 + rta[i]
        }
    }
    if (0 == o) {
        console.log(rta1)
    } else {
        console.log("El resultado final de la suma es el resultado de la resta, solamente que se le añade un - ya que es negativo, quedando de esta manera:")
        rta1 = "-" + rta1
        console.log(rta1)
    }

    return m

}
function explicacionr(m) {
    let j
    let i
    let filaTemporal = m[0];
    m[0] = m[1];
    m[1] = filaTemporal;
    let col = m[0].length;
    for (j = col; j > 0; j--) {
        if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 0) {
            console.log("\n")
            console.log("0-1=1 -> 1-1=0")
            console.log("Llevamos 1")
            m[1][j - 1] = 1
            m[3][j] = 0
        } else {
            if (m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 1) {
                console.log("\n")
                console.log("1-0=1")
                m[3][j] = 1
            } else {
                if (m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 0 | m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 1 | m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 1) {
                    if (m[1][j] == 0 & m[2][j] == 0 & m[0][j] == 0) {
                        console.log("\n")
                        console.log("0-0=0")
                    } else {
                        if (m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 1) {
                            console.log("\n")
                            console.log("1-1=0 -> 0-0=0")
                        } else {
                            if (m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 1) {
                                console.log("\n")
                                console.log("1-1=0")
                            }
                        }
                    }
                    m[3][j] = 0
                } else {
                    if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 1 | m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 0 | m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 0) {
                        if (m[1][j] == 1 & m[2][j] == 1 & m[0][j] == 1) {
                            console.log("\n")
                            console.log("1-1=1 -> 1-1=1")
                            console.log("Levamos 1")
                        } else {
                            if (m[1][j] == 0 & m[2][j] == 1 & m[0][j] == 0) {
                                console.log("\n")
                                console.log("0-1=1")
                                console.log("Levamos 1")
                            } else {
                                if (m[1][j] == 1 & m[2][j] == 0 & m[0][j] == 0) {
                                    console.log("\n")
                                    console.log("0-1=1 -> 1-0=1")
                                    console.log("Levamos 1")
                                }
                            }
                        }
                        m[1][j - 1] = 1
                        m[3][j] = 1
                    }
                }
            }
        }
        console.log("\n")
        console.log(m)
    }
    console.log("Se revisa al terminar la resta si queda un acarreo de 1 para verifivar si el resultado de la resta da un binario negativo o no:\n")
    if (m[1][0] == 1 & m[2][0] == 0 & m[0][0] == 0) {
        console.log("En este caso si quedo un acarreo de 1, esto significa que el resultado de esta operación es un binario negativo y aun no se ha terminado el proceso de la resta, para poder seguir resolviendo toca hacer los siguientes pasos: \n")
        console.log("-En la posición donde esta el acarreo se baja el 1 al resultado, de esta manera:\n")
        m[3][0] = 1
        console.log(m)

        m = rnegativo(m)
    } else {
        console.log("En este caso no quedo un acarreo de 1, dejandolo asi, siendo este el resultado: ")
        let rta = m[3];
        let rta1
        let i = 0;
        for (i = 0; i < rta.length; i++) {
            if (i == 0) {
                rta1 = String.fromCharCode(rta[i] + 48)
            } else {
                rta1 = rta1 + rta[i]
            }
        }

        console.log(rta1)
    }
}
function rnegativo(m) {
    let m1
    let rta = m[3];
    let rta1
    let rtao
    let i = 0;
    for (i = 0; i < rta.length; i++) {
        if (i == 0) {
            rtao = String.fromCharCode(rta[i] + 48)
        } else {
            rtao = rtao + rta[i]
        }
    }
    for (i = 0; i < rta.length; i++) {
        if (rta[i] === 0) {
            rta[i] = 1;
        } else {
            if (rta[i] === 1) {
                rta[i] = 0;
            }
        }
    }
    for (i = 0; i < rta.length; i++) {
        if (i == 0) {
            rta1 = String.fromCharCode(rta[i] + 48)
        } else {
            rta1 = rta1 + rta[i]
        }

    }
    console.log("-Sacamos el componente a 2 al resultado, esto se divide en 2 pasos, los cuales son los siguientes: \n")
    console.log("1)Sacamos el componente a 1 al resultado, esto consiste en cambiar los 0 por 1 y los 1 por 0, quedando asi:\n")
    console.log(rtao + "->" + rta1 + "\n")
    m1 = matriz(rta1, "1")
    console.log("2)El resultado se le suma 1:")
    m1 = explicacions(m1, 1)
    return m1
}

let binario1 = "1011";
let binario2 = "1111";
let resultado
let m = matriz(binario1, binario2)
/*console.log(m)
m=explicacions(m,0)*/
binario1 = "10101";
binario2 = "100111";
m = matriz(binario1, binario2)
explicacionr(m)
</script>
